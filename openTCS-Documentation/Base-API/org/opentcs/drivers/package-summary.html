<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jan 18 17:03:01 CET 2016 -->
<title>org.opentcs.drivers (openTCS 3.2.0.361 Base API documentation)</title>
<meta name="date" content="2016-01-18">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.opentcs.drivers (openTCS 3.2.0.361 Base API documentation)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">openTCS 3.2.0.361</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/opentcs/data/user/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../org/opentcs/drivers/messages/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/opentcs/drivers/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.opentcs.drivers</h1>
<div class="docSummary">
<div class="block">Interfaces and implementations of components needed for controlling physical
 vehicles and processing information sent by them.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/AdapterCommand.html" title="interface in org.opentcs.drivers">AdapterCommand</a></td>
<td class="colLast">
<div class="block">A marker interface for command objects used in a
 <code>CommunicationAdapter</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/CommunicationAdapter.html" title="interface in org.opentcs.drivers">CommunicationAdapter</a></td>
<td class="colLast">
<div class="block">This interface declares the methods that a driver communicating with and
 controlling a physical vehicle must implement.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/CommunicationAdapterFactory.html" title="interface in org.opentcs.drivers">CommunicationAdapterFactory</a></td>
<td class="colLast">
<div class="block">Provides communication adapter instances for vehicles to be controlled.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/CommunicationAdapterView.html" title="interface in org.opentcs.drivers">CommunicationAdapterView</a></td>
<td class="colLast">
<div class="block">A callback interface for implementing views on the communication adapter's
 state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/SimCommunicationAdapter.html" title="interface in org.opentcs.drivers">SimCommunicationAdapter</a></td>
<td class="colLast">
<div class="block">This interface declares methods that a vehicle driver intended for simulation
 must implement.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/VehicleController.html" title="interface in org.opentcs.drivers">VehicleController</a></td>
<td class="colLast">
<div class="block">Provides high-level methods for the system to control a vehicle.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/VehicleControllerPool.html" title="interface in org.opentcs.drivers">VehicleControllerPool</a></td>
<td class="colLast">
<div class="block">Maintains associations between vehicles and vehicle controllers.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/VehicleManager.html" title="interface in org.opentcs.drivers">VehicleManager</a></td>
<td class="colLast">
<div class="block">This interface declares methods that a communication adapter may call
 to let the control system know about status changes regarding itself or the
 vehicle it controls.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/VehicleManagerPool.html" title="interface in org.opentcs.drivers">VehicleManagerPool</a></td>
<td class="colLast">
<div class="block">Produces <code>VehicleManager</code>s for remote
 <code>CommunicationAdapter</code>s.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/VelocityListener.html" title="interface in org.opentcs.drivers">VelocityListener</a></td>
<td class="colLast">
<div class="block">Declares the method that is called to notify a listener about a new velocity
 value.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/BasicCommunicationAdapter.html" title="class in org.opentcs.drivers">BasicCommunicationAdapter</a></td>
<td class="colLast">
<div class="block">The base class that all communication adapters must extend.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/CommunicationAdapterEvent.html" title="class in org.opentcs.drivers">CommunicationAdapterEvent</a></td>
<td class="colLast">
<div class="block">An event emitted by a communication adapter.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/CommunicationAdapterRegistry.html" title="class in org.opentcs.drivers">CommunicationAdapterRegistry</a></td>
<td class="colLast">
<div class="block">A registry for all communication adapters in the system.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/LoadHandlingDevice.html" title="class in org.opentcs.drivers">LoadHandlingDevice</a></td>
<td class="colLast">
<div class="block">Describes a single load handling device on a vehicle.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/Message.html" title="class in org.opentcs.drivers">Message</a></td>
<td class="colLast">
<div class="block">Instances of this class represent timestamped messages, usually meant to be
 read by a user.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/MovementCommand.html" title="class in org.opentcs.drivers">MovementCommand</a></td>
<td class="colLast">
<div class="block">A command for moving a step.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/Processability.html" title="class in org.opentcs.drivers">Processability</a></td>
<td class="colLast">
<div class="block">Describes an answer to a call of
 <a href="../../../org/opentcs/drivers/CommunicationAdapter.html#canProcess-java.util.List-"><code>CommunicationAdapter#canProcess()</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/VehicleModel.html" title="class in org.opentcs.drivers">VehicleModel</a></td>
<td class="colLast">
<div class="block">Mainly provides vehicle data to be displayed in the GUI.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/VelocityHistory.html" title="class in org.opentcs.drivers">VelocityHistory</a></td>
<td class="colLast">
<div class="block">A <code>VelocityListener</code> that keeps velocity values in a ring buffer.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Enum Summary table, listing enums, and an explanation">
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/CommunicationAdapter.State.html" title="enum in org.opentcs.drivers">CommunicationAdapter.State</a></td>
<td class="colLast">
<div class="block">Defines the various possible states of a communication adapter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/opentcs/drivers/Message.Type.html" title="enum in org.opentcs.drivers">Message.Type</a></td>
<td class="colLast">
<div class="block">Defines the possible message types.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package org.opentcs.drivers Description">Package org.opentcs.drivers Description</h2>
<div class="block">Interfaces and implementations of components needed for controlling physical
 vehicles and processing information sent by them.

 <h1>How to create a vehicle driver for openTCS</h1>

 <h2>Steps to create a new vehicle driver</h2>

 <ol>
 <li>Create a new class which extends <code>BasicCommunicationAdapter</code>:
 <ol>
 <li>
 Implement the abstract methods of <code>BasicCommunicationAdapter</code> in
 the extended class.
 </li>
 <li>
 Let the driver call
 <a href="../../../org/opentcs/drivers/BasicCommunicationAdapter.html#commandExecuted-org.opentcs.drivers.AdapterCommand-"><code>BasicCommunicationAdapter.commandExecuted(AdapterCommand)</code></a>
 when the controlled vehicle's reported state indicates that it has finished
 an order. This method should be called for <code>AdapterCommand</code>s in
 the same order they were given to the driver instance.
 </li>
 <li>
 In situations in which the state of a controlled vehicle changes in a way
 that is relevant for the driver's GUI, your driver should call
 <a href="../../../org/opentcs/drivers/BasicCommunicationAdapter.html#updateViews--"><code>BasicCommunicationAdapter.updateViews()</code></a>.
 </li>
 <li>
 Optional: Override the methods <code>enable()</code> and
 <code>disable()</code>. (Make sure to call <code>super.enable()</code> or
 <code>super.disable()</code> if you override them.)
 </li>
 <li>
 Optional: Override the methods <code>setCommandQueueCapacity()</code> and
 <code>setSentQueueCapacity()</code>. (The former sets the maximum number of
 commands that the openTCS kernel may send to the communication adapter; the
 latter sets the maximum number of commands that the driver may send to the
 vehicle.)
 </li>
 <li>
 Optional: Override the method <code>canSendNextCommand()</code>.
 </li>
 <li>
 Optional: Override the method <code>getCustomDisplayPanels()</code> to make
 custom GUI panels available which allow you to manually send vehicle specific
 commands/telegrams or show vehicle specific data.
 </li>
 </ol>
 </li>
 <li>
 Create a new class which implements <code>CommunicationAdapterFactory</code>:
 <ol>
 <li>
 Implement all methods of the interface, so instances of your new
 <code>CommunicationAdapter</code> implementation can be created, configured
 and returned.
 </li>
 </ol>
 </li>
 <li>
 Create panels that the kernel GUI should display for the adapter:
 <ol>
 <li>
 Each panel must extend <code>javax.swing.JPanel</code> and implement the
 interface <code>CommunicationAdapterView</code>.
 </li>
 <li>
 Create and return instances of the implemented panel classes in the
 <code>getCustomDisplayPanels()</code> of your adapter class.
 </li>
 </ol>
 </li>
 </ol>
 
 <p>
 For an example, please look at the implementation of the loopback adapter for
 virtual vehicles in package <code>org.opentcs.virtualvehicle</code> of the
 openTCS source distribution.
 </p>

 <h2>Requirements for a vehicle driver to be found at runtime</h2>

 <ol>
 <li>
 The JAR file containing your driver and all resources needed by it must also
 contain a folder named <code>META-INF/services/</code> with a file named
 <code>org.opentcs.drivers.CommunicationAdapterFactory</code>. This file
 should consist of a single line of text holding simply the name of the
 factory class, e.g.:
 <blockquote>
 <code>
 org.opentcs.virtualvehicle.LoopbackCommunicationAdapterFactory
 </code>
 </blockquote>
 <p>
 Background: openTCS uses <code>java.util.ServiceLoader</code> to find vehicle
 drivers dynamically on startup, which depends on
 <code>META-INF/services/org.opentcs.drivers.CommunicationAdapterFactory</code>.
 </p>
 <p>
 Hint: If you're using <a href="http://ant.apache.org">Apache Ant</a> to build
 your communication adapter, you can use its <code>jar</code> task to register
 your adapter factory implementation as a service.
 </p>
 </li>
 <li>
 The JAR file of your driver, containing all neccessary resources, has to be
 placed in the subdirectory <code>lib/openTCS-extensions</code> of the openTCS
 kernel application's installation directory <em>before</em> the kernel is
 started.
 <br>
 (The openTCS start scripts include all JAR files in that directory in the
 application's classpath.)
 </li>
 </ol>

 <p>
 For an example, please look at the <code>buildkernel</code> target in the Ant
 build file (<code>build.xml</code>) in the openTCS source distribution.
 </p>
 <p>
 If your driver meets these requirements, it should be found automatically
 when you start the kernel.
 </p>
 
 <h2>Communication between kernel clients and communication adapters</h2>
 
 <p>
 Sometimes it is required to have some influence on the behaviour of a
 communication adapter (and thus the vehicle it is associated with) directly
 from a kernel client - to send a special telegram to the vehicle, for
 instance. For these cases,
 <a href="../../../org/opentcs/access/Kernel.html#sendCommAdapterMessage-org.opentcs.data.TCSObjectReference-java.lang.Object-"><code>Kernel.sendCommAdapterMessage(org.opentcs.data.TCSObjectReference, java.lang.Object)</code></a>
 provides a one-way communication channel for a client to send a message
 object to a communication adapter currently associated with a vehicle; an
 adapter overriding <code>processMessage()</code> may interpret message
 objects sent to it and react in an appropriate way. Note that the client
 sending the message may not know which communication adapter implementation
 is currently associated with the vehicle, so the adapter may or may not be
 able to understand the message.
 </p>
 <p>
 For messages from the communication adapter to a client there is no direct
 channel for the adapter to use. A communication adapter may, however, set
 values in a vehicle's properties to deliver information to all connected
 clients.
 </p>
 
 <h2>Supportive classes</h2>
 
 <p>
 If the communication protocol of the vehicle you want to create a driver for
 is based on TCP/IP, you may also want to have a look at some of the utility
 classes in the package <code>org.opentcs.util.communication.tcp</code>.
 </p></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">openTCS 3.2.0.361</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/opentcs/data/user/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../org/opentcs/drivers/messages/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/opentcs/drivers/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
